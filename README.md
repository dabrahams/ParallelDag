# Parallel DAG computation methods

Here are the results from one run of `swift package benchmark --grouping metric`:

```
Instructions
╒════════════════════════════════════════════════════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╕
│ Test                                                   │      p0 │     p25 │     p50 │     p75 │     p90 │     p99 │    p100 │ Samples │
╞════════════════════════════════════════════════════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╡
│ ParallelDAG:ActorBasedTaskCache (K) *                  │    1732 │    2480 │    2619 │    2775 │    2898 │    3160 │    3470 │    2791 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:GCDBasedTaskCache (K) *                    │    3750 │    4227 │    4448 │    4751 │    5046 │    5517 │    6469 │    1871 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:MutexBasedTaskCache (K) *                  │    1341 │    2009 │    2175 │    2343 │    2497 │    2804 │    3353 │    2769 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:OSAllocatedUnfairLockBasedTaskCache (K) *  │    1343 │    1781 │    1928 │    2105 │    2294 │    2671 │    3098 │    3123 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Operations (K) *                           │    2952 │    3645 │    3932 │    4272 │    4628 │    5140 │    6039 │    1962 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:ReadWriteLock (K) *                        │    1624 │    2464 │    2701 │    2914 │    3103 │    3457 │    4180 │    2403 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Tasks (K) *                                │    1683 │    2241 │    2419 │    2580 │    2693 │    2896 │    3110 │    2881 │
╘════════════════════════════════════════════════════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╛

Malloc (total)
╒════════════════════════════════════════════════════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╕
│ Test                                                   │      p0 │     p25 │     p50 │     p75 │     p90 │     p99 │    p100 │ Samples │
╞════════════════════════════════════════════════════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╡
│ ParallelDAG:ActorBasedTaskCache *                      │     254 │     637 │     726 │     831 │     960 │    1258 │   19214 │    2791 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:GCDBasedTaskCache *                        │     562 │    1795 │    2115 │    2587 │    3111 │    4579 │    6680 │    1871 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:MutexBasedTaskCache *                      │     221 │     430 │     520 │     644 │     794 │    1147 │   18757 │    2769 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:OSAllocatedUnfairLockBasedTaskCache *      │     195 │     434 │     517 │     636 │     782 │    1125 │    2011 │    3123 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Operations *                               │     968 │     997 │    1075 │    1100 │    1178 │    1271 │   11516 │    1962 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:ReadWriteLock *                            │     161 │     437 │     520 │     635 │     777 │    1204 │    1516 │    2403 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Tasks *                                    │     137 │     435 │     531 │     667 │     826 │    1181 │    1920 │    2881 │
╘════════════════════════════════════════════════════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╛

Memory (resident peak)
╒════════════════════════════════════════════════════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╕
│ Test                                                   │      p0 │     p25 │     p50 │     p75 │     p90 │     p99 │    p100 │ Samples │
╞════════════════════════════════════════════════════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╡
│ ParallelDAG:ActorBasedTaskCache (M)                    │      10 │      14 │      14 │      14 │      14 │      14 │      14 │    2791 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:GCDBasedTaskCache (M)                      │      11 │      16 │      16 │      16 │      16 │      16 │      16 │    1871 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:MutexBasedTaskCache (M)                    │      10 │      16 │      16 │      17 │      17 │      17 │      17 │    2769 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:OSAllocatedUnfairLockBasedTaskCache (M)    │      10 │      14 │      14 │      16 │      17 │      17 │      17 │    3123 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Operations (M)                             │      11 │      19 │      21 │      23 │      23 │      23 │      23 │    1962 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:ReadWriteLock (M)                          │      11 │      15 │      15 │      16 │      16 │      16 │      16 │    2403 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Tasks (M)                                  │      10 │      14 │      15 │      15 │      15 │      15 │      15 │    2881 │
╘════════════════════════════════════════════════════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╛

Throughput (# / s)
╒════════════════════════════════════════════════════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╕
│ Test                                                   │      p0 │     p25 │     p50 │     p75 │     p90 │     p99 │    p100 │ Samples │
╞════════════════════════════════════════════════════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╡
│ ParallelDAG:ActorBasedTaskCache (#)                    │    5414 │    4155 │    3997 │    3829 │    3597 │    2741 │    1058 │    2791 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:GCDBasedTaskCache (#)                      │    3475 │    2929 │    2653 │    2343 │    2119 │    1673 │     737 │    1871 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:MutexBasedTaskCache (#)                    │    6291 │    4995 │    4659 │    4279 │    3845 │    3023 │     361 │    2769 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:OSAllocatedUnfairLockBasedTaskCache (#)    │    7535 │    5795 │    5351 │    4771 │    4319 │    3241 │     841 │    3123 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Operations (#)                             │    4486 │    3429 │    3071 │    2693 │    2367 │    1800 │    1192 │    1962 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:ReadWriteLock (#)                          │    6284 │    4017 │    3667 │    3387 │    3071 │    1832 │     600 │    2403 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Tasks (#)                                  │    5775 │    4431 │    4175 │    3951 │    3677 │    3067 │    1074 │    2881 │
╘════════════════════════════════════════════════════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╛

Time (total CPU)
╒════════════════════════════════════════════════════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╕
│ Test                                                   │      p0 │     p25 │     p50 │     p75 │     p90 │     p99 │    p100 │ Samples │
╞════════════════════════════════════════════════════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╡
│ ParallelDAG:ActorBasedTaskCache (μs) *                 │     250 │     352 │     374 │     399 │     435 │     567 │     810 │    2791 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:GCDBasedTaskCache (μs) *                   │     413 │     507 │     549 │     600 │     658 │     808 │    1430 │    1871 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:MutexBasedTaskCache (μs) *                 │     195 │     313 │     347 │     386 │     435 │     581 │     960 │    2769 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:OSAllocatedUnfairLockBasedTaskCache (μs) * │     182 │     270 │     299 │     338 │     382 │     519 │     687 │    3123 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Operations (μs) *                          │     329 │     503 │     568 │     671 │     782 │    1067 │    1608 │    1962 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:ReadWriteLock (μs) *                       │     219 │     368 │     409 │     445 │     487 │     664 │    1021 │    2403 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Tasks (μs) *                               │     236 │     340 │     368 │     398 │     432 │     532 │     625 │    2881 │
╘════════════════════════════════════════════════════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╛

Time (wall clock)
╒════════════════════════════════════════════════════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╤═════════╕
│ Test                                                   │      p0 │     p25 │     p50 │     p75 │     p90 │     p99 │    p100 │ Samples │
╞════════════════════════════════════════════════════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╪═════════╡
│ ParallelDAG:ActorBasedTaskCache (μs) *                 │     185 │     241 │     250 │     261 │     278 │     365 │     945 │    2791 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:GCDBasedTaskCache (μs) *                   │     288 │     342 │     377 │     427 │     472 │     598 │    1358 │    1871 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:MutexBasedTaskCache (μs) *                 │     159 │     200 │     215 │     234 │     260 │     331 │    2766 │    2769 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:OSAllocatedUnfairLockBasedTaskCache (μs) * │     133 │     173 │     187 │     210 │     232 │     309 │    1189 │    3123 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Operations (μs) *                          │     223 │     292 │     326 │     372 │     423 │     556 │     839 │    1962 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:ReadWriteLock (μs) *                       │     159 │     249 │     273 │     295 │     326 │     546 │    1666 │    2403 │
├────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ ParallelDAG:Tasks (μs) *                               │     173 │     226 │     240 │     253 │     272 │     326 │     931 │    2881 │
╘════════════════════════════════════════════════════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╧═════════╛
```
